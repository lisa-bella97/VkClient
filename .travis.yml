language: generic

# Можно тестировать только на одной платформе (в данном случае выбрано osx, clang-3.8)

matrix:
  include:
    - os: linux
      sudo: required
      env: COMPILER_NAME=gcc CXX=g++-5 CC=gcc-5
      addons:
        apt:
          packages:
            - g++-5
            - cmake
          sources: &sources
            - llvm-toolchain-precise
            - ubuntu-toolchain-r-test
    #- os: osx
      #compiler: clang-3.8
      #env: COMPILER="clang++-3.8" -std=c++11 OPENSSL_ROOT_DIR="/usr/local/opt/openssl"

env:
  global:
    - secure: "0axSGqbnfloUnstESd9iew/6QXfl2UWXayTz8wnOvWuzYxVISspk2j663nO2gz3Kk6w9/xXlkQPRMXSQ3iO7hvC3FEUcoWsDaMf/+tw/Zc4DZLgG2MA8Nqw2AS/K/lciR22sMUrQ42JtCCwYYMIqqo+617AFQheas+bq8JLCU48/L7pmAb8gOikO09ktxJYSIajDkORyHQbZyw/LYQCChI6+hfPdEuLOv6njTUxW3yOrzBUvMuwYVtTR2d5XAkKaAafKlQOCXKROKd/Xiz/Wl6TWxVujmtudWssnCFXtBYB10w5iTOn7y/3WbZb8OI2YN0G8ySKOY5ABiuvq6A+bnS5CJ6qUIkChurLYyipWOfzkNx73WvNGtSMqhaPXA5h0wmBIhaBC3H3AvBfyOM4tia4XZ2F0v5dVSrI/8jiLtbRg3T7XS0gUUmMjALeexYnQmPOG6RPT7F99KX42c8O6w/mqhJuJu4NeKP3EpI+g5VyWRxpyrs9sju+2tfzpl1VXyHZMJQY3AmZE1ZNGvN+L5LswIouipjxh8aU3nd605riT+ZpaMsNwFop191pWlz/L7o+UgPfXmyuO88wGjgMAioupRJy/s1fRTlcyfSzRNH8JFs72m/Qm4f55oCQS/EfwtS0lD6uTrOnvCj3aej5VzFqu+tHzNflbggg+9K//1z0="
    - secure: "IL7i2y8mmezVnXRuCAeIQqRHABV3bt+JH8XrMJmUCJ7bb+qCBh5CvbHZ99tGRylIWuPuNWLJg86R0y3Mym3KX5i+CPYDGQklpl1WniLlrN3WYK3YsX/HLHURYuhMYJS/Qzb/clBIHrTQ8JRwwhl0GHza4Rt0swjq8R5HVjJIEYJ08oPijWph6FvDWwvrltQxpIyWaARRdePtevM7gBpHCkqW4R5ZTN9ODhKyoEpgO1XmEfmvAQOni/NmOBdcy/lOjiF7fUKDQ5PZUZUGhBP3CznCcpM+mWrJj3n/pmwFtqUIBInKaTBqJ4JNpFWCKeR6j/m0WLqFodWrfCrzT2xL4VERWs1vseDUJa8BuiGAKlhXxneQt4W2IjsVRGgcKyvi73sHa2uSqZpeadz/Q7N4NTBqj6lobG8OCXk9iOu3R6F1m9GHfSLU3dEWnBz+ZOsYqn4khwlWMTCfvB9qQoH9lVckZitY1OJAXvY1Id/bRqjOhgFwEmnYR6CanfkfrlM1WOTJApUsZKRwLCaf1TZ9cxm+MJhYKwFFh1oHCghe41QHkmG/7yzBQ2IkDwI+Iwk+D4wBe1RDxhPG9rw5HKToYRinfwd/mA85QP0anUBLmZvUWExW7VUEFjuOBr71xuNRfQ/Tqok9zosAFCGBI97zbTDw/zCTDmEtlOiP2hN11kI="

script:
  - mkdir build && cd build
  - cmake .. -DOPENSSL_ROOT_DIR=/usr/local/ssl -DOPENSSL_LIBRARIES=/usr/local/ssl/lib && make
  - ./check -s -r compact
